{"version":3,"sources":["jquery.crashreport.js","errorHandler.js","logService.js"],"names":["$","defaultOptions","url","application","applicationVersion","fn","crashReport","options","init","instanceOptions","extend","logService","LogService","ErrorHandler","jQuery","window","addEventListener","onError","e","messageText","message","lineNumber","lineno","columnNumber","colno","errorObject","error","filename","self","throttling","errorDescriptor","getErrorDescriptor","lastError","clearTimeout","throttleTimer","setTimeout","throttleTimeout","logException","this","log","resultMessage","Version","ajax","contentType","method","crossDomain","data","JSON","stringify","trace","additionalInforamtion","TimeStamp","LogLevel","logLevels","Trace","MessageText","StackTrace","AdditionalInformation","UserId","PersonId","InnerException","formattedMessage","additionalInformation","currentLoaction","location","href","userAgent","navigator","Fatal","stack","Error","Warn","Info","Debug"],"mappings":"CAAA,SAAAA,GACA,GAAAC,IACAC,IAAA,GACAC,YAAA,GACAC,mBAAA,MAGAJ,GAAAK,GAAAC,YAAA,SAAAC,GAGA,QAAAC,KACA,GAAAC,GAAAT,EAAAU,UAAAT,EAAAM,GAEAI,EAAA,GAAAX,GAAAK,GAAAC,YAAAM,WAAAH,EACA,IAAAT,GAAAK,GAAAC,YAAAO,aAAAF,GANAH,MASAM,QCjBA,SAAAd,GAGA,QAAAa,GAAAF,GAUA,QAAAH,KACAO,OAAAC,iBAAA,QAAAC,GAGA,QAAAA,GAAAC,GACA,GAAAC,GAAAD,EAAAE,QACAC,EAAAH,EAAAI,OACAC,EAAAL,EAAAM,MACAC,EAAAP,EAAAQ,MACAxB,EAAAgB,EAAAS,QAEA,IAAAC,EAAAC,WAAA,CACA,GAAAC,GAAAC,EAAAZ,EAAAjB,EAAAmB,EAAAE,EAEA,IAAAO,GAAAF,EAAAI,UACA,MAEAC,cAAAL,EAAAM,eACAN,EAAAM,cAAAC,WAAA,WAAAP,EAAAI,UAAA,MAAAJ,EAAAQ,iBAEAR,EAAAI,UAAAF,EAGAnB,EAAA0B,aAAAlB,EAAAjB,EAAAmB,EAAAE,EAAAE,GAGA,QAAAM,GAAAZ,EAAAjB,EAAAmB,EAAAE,GACA,MAAAJ,GAAAjB,EAAAmB,EAAAE,EApCA,GAAAK,GAAAU,IAEAV,GAAAC,YAAA,EACAD,EAAAQ,gBAAA,IACAR,EAAAI,UAAA,KACAJ,EAAAM,cAAA,KAEA1B,IAVAR,EAAAU,OAAAV,EAAAK,GAAAC,aAAAO,aAAAA,KA0CAC,QC3CA,SAAAd,GAGA,QAAAY,GAAAL,GAwBA,QAAAgC,GAAAnB,GACA,GAAAoB,GAAAxC,EAAAU,QACA+B,QAAAb,EAAArB,QAAAH,oBACAgB,EAEApB,GAAA0C,MAEAxC,IAAA0B,EAAArB,QAAAL,IAAA,QAAA0B,EAAArB,QAAAJ,YAAA,OACAwC,YAAA,mBACAC,OAAA,OACAC,aAAA,EACAC,KAAAC,KAAAC,UAAAR,KAIA,QAAAS,GAAA9B,EAAA+B,GACA,GAAA9B,IACA+B,UAAA,KACAC,SAAAC,EAAAC,MACAC,YAAApC,EACAqC,WAAA,KACAC,sBAAAP,EAAAH,KAAAC,UAAAE,GAAA,KACAQ,OAAA,EACAC,SAAA,EACAC,eAAA,KAGAhC,GAAAW,IAAAnB,GAGA,QAAAiB,GAAAlB,EAAAjB,EAAAmB,EAAAE,EAAAE,GACA,GAAAoC,GAAA1C,EAAA,QAAAjB,EAAA,MAAAmB,EAAA,IAAAE,EAAA,IACAuC,GACAC,gBAAAhD,OAAAiD,SAAAC,KACAC,UAAAC,UAAAD,WAGA9C,GACA+B,UAAA,KACAC,SAAAC,EAAAe,MACAb,YAAAM,EACAL,WAAA/B,GAAAA,EAAA4C,OAAA,qBACAZ,sBAAAV,KAAAC,UAAAc,GACAF,eAAA,KAGAhC,GAAAW,IAAAnB,GArEA,GAAAQ,GAAAU,KAEArC,GACAC,IAAA,GACAC,YAAA,UACAC,mBAAA,MAGAwB,GAAArB,QAAAP,EAAAU,UAAAT,EAAAM,GAEAqB,EAAAW,IAAAA,EACAX,EAAAqB,MAAAA,EACArB,EAAAS,aAAAA,CAEA,IAAAgB,IACAe,MAAA,EACAE,MAAA,EACAC,KAAA,EACAC,KAAA,EACAC,MAAA,EACAnB,MAAA,GAvBAtD,EAAAU,OAAAV,EAAAK,GAAAC,aAAAM,WAAAA,KA2EAE","file":"../jquery.crashreport.min.js","sourcesContent":["(function ($) {\r\n\tvar defaultOptions = {\r\n\t\turl: '',\r\n\t\tapplication: '',\r\n\t\tapplicationVersion: '0.0'\r\n\t};\r\n\r\n\t$.fn.crashReport = function (options) {\r\n\t\tinit();\r\n\r\n\t\tfunction init() {\r\n\t\t\tvar instanceOptions = $.extend({}, defaultOptions, options);\r\n\t\t\t\r\n\t\t\tvar logService = new $.fn.crashReport.LogService(instanceOptions);\r\n\t\t\tvar errorHandler = new $.fn.crashReport.ErrorHandler(logService);\r\n\t\t};\r\n\t};\r\n})(jQuery);","(function ($) {\r\n\t$.extend($.fn.crashReport, { ErrorHandler: ErrorHandler });\r\n\r\n\tfunction ErrorHandler(logService) {\r\n\t\tvar self = this;\r\n\r\n\t\tself.throttling = true;\r\n\t\tself.throttleTimeout = 2000;\r\n\t\tself.lastError = null;\r\n\t\tself.throttleTimer = null;\r\n\r\n\t\tinit();\r\n\r\n\t\tfunction init() {\r\n\t\t\twindow.addEventListener('error', onError);\r\n\t\t}\r\n\r\n\t\tfunction onError(e) {\r\n\t\t\tvar messageText = e.message;\r\n\t\t\tvar lineNumber = e.lineno;\r\n\t\t\tvar columnNumber = e.colno;\r\n\t\t\tvar errorObject = e.error;\r\n\t\t\tvar url = e.filename;\r\n\r\n\t\t\tif (self.throttling) {\r\n\t\t\t\tvar errorDescriptor = getErrorDescriptor(messageText, url, lineNumber, columnNumber);\r\n\r\n\t\t\t\tif (errorDescriptor == self.lastError)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tclearTimeout(self.throttleTimer);\r\n\t\t\t\tself.throttleTimer = setTimeout(function() { self.lastError = null; }, self.throttleTimeout);\r\n\r\n\t\t\t\tself.lastError = errorDescriptor;\r\n\t\t\t}\r\n\r\n\t\t\tlogService.logException(messageText, url, lineNumber, columnNumber, errorObject);\r\n\t\t};\r\n\r\n\t\tfunction getErrorDescriptor(messageText, url, lineNumber, columnNumber) {\r\n\t\t\treturn messageText + url + lineNumber + columnNumber;\r\n\t\t}\r\n\t}\r\n})(jQuery);","(function($) {\r\n\t$.extend($.fn.crashReport, { LogService: LogService });\r\n\r\n\tfunction LogService(options) {\r\n\t\tvar self = this;\r\n\r\n\t\tvar defaultOptions = {\r\n\t\t\turl: '',\r\n\t\t\tapplication: 'Unknown',\r\n\t\t\tapplicationVersion: '0.0'\r\n\t\t}\r\n\r\n\t\tself.options = $.extend({}, defaultOptions, options);\r\n\r\n\t\tself.log = log;\r\n\t\tself.trace = trace;\r\n\t\tself.logException = logException;\r\n\r\n\t\tvar logLevels = {\r\n\t\t\tFatal: 0,\r\n\t\t\tError: 1,\r\n\t\t\tWarn: 2,\r\n\t\t\tInfo: 3,\r\n\t\t\tDebug: 4,\r\n\t\t\tTrace: 5\r\n\t\t};\r\n\r\n\t\tfunction log(message) {\r\n\t\t\tvar resultMessage = $.extend({\r\n\t\t\t\tVersion: self.options.applicationVersion\r\n\t\t\t}, message);\r\n\r\n\t\t\t$.ajax(\r\n\t\t\t{\r\n\t\t\t\turl: self.options.url + '/api/' + self.options.application + '/log',\r\n\t\t\t\tcontentType: 'application/json',\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\tcrossDomain: true,\r\n\t\t\t\tdata: JSON.stringify(resultMessage)\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\tfunction trace(messageText, additionalInforamtion) {\r\n\t\t\tvar message = {\r\n\t\t\t\tTimeStamp: null,\r\n\t\t\t\tLogLevel: logLevels.Trace,\r\n\t\t\t\tMessageText: messageText,\r\n\t\t\t\tStackTrace: null,\r\n\t\t\t\tAdditionalInformation: additionalInforamtion ? JSON.stringify(additionalInforamtion) : null,\r\n\t\t\t\tUserId: 0,\r\n\t\t\t\tPersonId: 0,\r\n\t\t\t\tInnerException: null\r\n\t\t\t}\r\n\r\n\t\t\tself.log(message);\r\n\t\t};\r\n\r\n\t\tfunction logException(messageText, url, lineNumber, columnNumber, errorObject) {\r\n\t\t\tvar formattedMessage = messageText + '\\r\\n[' + url + '] [' + lineNumber + ':' + columnNumber + ']';\r\n\t\t\tvar additionalInformation = {\r\n\t\t\t\tcurrentLoaction: window.location.href,\r\n\t\t\t\tuserAgent: navigator.userAgent\r\n\t\t\t};\r\n\r\n\t\t\tvar message = {\r\n\t\t\t\tTimeStamp: null,\r\n\t\t\t\tLogLevel: logLevels.Fatal,\r\n\t\t\t\tMessageText: formattedMessage,\r\n\t\t\t\tStackTrace: (errorObject && errorObject.stack) || 'no stack available',\r\n\t\t\t\tAdditionalInformation: JSON.stringify(additionalInformation),\r\n\t\t\t\tInnerException: null\r\n\t\t\t}\r\n\r\n\t\t\tself.log(message);\r\n\t\t};\r\n\t}\r\n})(jQuery);"]}